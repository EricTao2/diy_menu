# DIY 菜单小程序

DIY 菜单是一款基于微信云开发的多角色共享菜单小程序。菜单管理员可配置分类与菜品，顾客可以查看菜单并下单，厨师能够接收订单并更新状态。项目内置 Mock 数据，可直接在微信开发者工具中运行体验全流程。

## 功能概览

- **多菜单与角色**：同一用户可在不同菜单下拥有管理员、厨师、顾客等角色，并可在仪表盘中切换身份。
- **菜单管理**：管理员可维护分类顺序、菜品信息、上下架状态以及菜单级的自定义选项库。
- **自定义选项**：支持在菜单级定义如“辣度”“份量”等选项，并在多个菜品间复用，含必选、默认值与排序设置。
- **顾客体验**：分类浏览菜品、选择自定义选项、加入购物车、提交订单、查看历史订单并再次下单。
- **厨师工作台**：按状态筛选订单、查看详情并将订单从“新建”流转到“处理中/完成/取消”。
- **主题外观**：提供多套主题配色，支持用户或菜单级别切换并记忆偏好。
- **通知模拟**：订单创建与状态变更会生成站内通知，仪表盘展示，同时触发全局提示。

## 目录结构

```
.
├── app.js                # 全局初始化（云开发、Store、主题、通知）
├── services/             # API 封装与模拟数据
├── utils/                # 通用工具：状态、主题、文案、权限等
├── components/           # 角色切换、菜品选项、订单卡片等通用组件
├── pages/
│   ├── menu-selector/    # 菜单与角色选择
│   ├── admin/            # 管理员相关页面（设置、分类、菜品、选项库）
│   ├── customer/         # 顾客相关页面（菜单、购物车、订单流程）
│   ├── chef/             # 厨师相关页面（订单列表与详情）
│   └── common/           # 通用订单详情页面
```

## 开发体验

### 1. 安装依赖
```bash
npm install
# 或者使用 yarn/pnpm
```

### 2. 构建 npm
在微信开发者工具中选择菜单「工具」→「构建 npm」。

### 3. 导入项目
使用微信开发者工具导入本仓库所在目录即可启动。项目默认使用 `services/mock.js` 中的本地 Mock 数据，不依赖真实云资源。

### 4. 切换角色
- 进入小程序后首先到菜单选择页，选择某菜单与角色进入。
- 可回到菜单选择页随时切换角色，体验不同端功能。

### 5. 对接真实云端（可选）
当前 API 通过 `services/api.js` 聚合，若需要接入真实云数据库/云函数，可在保持接口不变的前提下替换实现，并根据需要关闭 `config/index.js` 中的 `enableMock` 开关。

## Mock 数据说明

`services/mock.js` 内置：
- 菜单、分类、菜品、自定义选项
- 用户角色关系
- 购物车、订单、通知数据

数据存储在小程序本地 Storage，可在开发者工具中清除缓存重置。

## 后续规划

- 替换为真实云函数与数据库访问
- 补充自动化测试/CI 流程
- 丰富 UI（上传菜品图片、拖拽排序、更多通知渠道）

欢迎根据业务需要扩展功能，祝开发顺利！
