<view class="page {{themeClass}}">
  <view class="container">
    <view class="header-row">
      <view class="section-title">菜品管理</view>
      <button class="primary" size="mini" bindtap="onAddDish">新建菜品</button>
    </view>
    <picker mode="selector" range="{{categoryPickerRange}}" bindchange="onCategoryPickerChange">
      <view class="picker">{{selectedCategoryName}}</view>
    </picker>
    <block wx:for="{{filteredDishes}}" wx:key="id" wx:for-item="dish">
      <view class="dish-card">
        <view class="dish-info">
          <text class="dish-name">{{dish.name}}</text>
          <text class="dish-price">{{dish.priceText}}</text>
        </view>
        <view class="dish-meta">
          <text>{{dish.categoryName}}</text>
          <text>{{dish.status === 'on' ? '上架' : '下架'}}</text>
        </view>
        <view class="dish-actions">
          <button size="mini" data-id="{{dish.id}}" bindtap="onToggleStatus">{{dish.status === 'on' ? '下架' : '上架'}}</button>
          <button size="mini" data-id="{{dish.id}}" data-direction="up" bindtap="onMove">↑</button>
          <button size="mini" data-id="{{dish.id}}" data-direction="down" bindtap="onMove">↓</button>
          <button size="mini" data-id="{{dish.id}}" bindtap="onEditDish">编辑</button>
          <button size="mini" data-id="{{dish.id}}" bindtap="onDeleteDish">删除</button>
        </view>
      </view>
    </block>
  </view>
</view>
